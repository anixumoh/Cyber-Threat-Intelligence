import { Component, Input } from '@angular/core';

@Component({
  selector: 'app-malware-details-static-pdf',
  templateUrl: './pdf.component.html'
})
export class MalwareStaticPdf {

  @Input() staticInfo;
  public pdfMetadata = [];

  constructor() {
  }

  public prettifyList(toPrettify: any[]){
    let result = "<ol>";
    for(let element of toPrettify){
      let li = '<li>';
      if (typeof element == 'object'){
        li += this.prettifyObject(element)
      } else {
        li += element.toString();
      }
      li += '</li>'
      result += li;
    }
    result += '</ol>';
    return result;
  }

  public prettifyObject(toPrettify: {}){
    let result = "<ul>";
    for(let key in toPrettify){
      let element = '<li>' + key.replace(/_/g, ' ') + ':';
      if (toPrettify[key] === null){
        element += ' null';
      } else if(Array.isArray(toPrettify[key])){
        element += this.prettifyList(toPrettify[key]);
      } else if(typeof toPrettify[key] == 'object'){
        element += this.prettifyObject(toPrettify[key]);
      } else {
        if (key == 'orig_code'){
          element += ' <span><code>' + toPrettify[key] + '</code></span>';
        } else {
          element += ' ' + toPrettify[key].toString();
        }
      }
      element += '</li>'
      result += element;
    }
    result += '</ul>';
    return result;
  }
}

