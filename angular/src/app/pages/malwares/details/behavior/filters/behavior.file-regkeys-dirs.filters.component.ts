import {Component, EventEmitter, Input, OnInit, Output} from '@angular/core';
import {IMultiSelectOption, IMultiSelectSettings} from 'angular-2-dropdown-multiselect';

@Component({
  selector: 'app-preview-behavior-fileregdir-filters',
  templateUrl: './behavior.file-regkeys-dirs.filters.component.html',
  styleUrls: ['./behavior.file-regkeys-dirs.filters.component.scss']
})
export class FileRegDirsBehaviorFiltersComponent implements OnInit {

  @Input() filters: string[];
  @Output() filterChange = new EventEmitter<string[]>();

  private selectedFilterModel: string[];
  public filterOptions: IMultiSelectOption[] = [];
  // Settings configuration
  public filterSettings: IMultiSelectSettings = {
    displayAllSelectedText: true
  };

  constructor() {
  }

  ngOnInit() {
    this.setFilterOptions();
  }

  private onFilterChange() {
    if (this.selectedFilterModel.length > 0) {
      this.filterChange.emit(this.selectedFilterModel);
    }
  }

  private setFilterOptions() {
    if (!this.filters) {
      return;
    }
    for (let filter of this.filters) {
      let option = {
        id: filter,
        name: filter
      };
      this.filterOptions.push(option);
    }
    this.selectedFilterModel = this.filters;
  }

}
