import { Component, OnInit, Input, OnChanges, SimpleChanges } from '@angular/core';

@Component({
  selector: 'app-malware-details-process-behavior-api_stats',
  templateUrl: './process-behavior.api_stats.component.html',
})
export class MalwareProcessBehaviorApiStats implements OnInit, OnChanges {
  @Input() data;
  public apistats = [];

  constructor() {}

  ngOnInit() {}

  ngOnChanges(changes: SimpleChanges) {
    if (changes.hasOwnProperty('data')) {
      let stats = [];
      let dataEvent = changes['data']['currentValue'];
      for (let key in dataEvent) {
        let item = {
          key: key,
          value: this.data[key],
        };
        stats.push(item);
      }
      this.apistats = [...stats].sort(function (obj1, obj2) {
        // Descending: first age more than the previous
        return obj2.value - obj1.value;
      });
    }
  }
}
